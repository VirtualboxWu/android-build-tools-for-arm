
include $(BUILD_SYSTEM)/clang/arm.mk

CLANG_CONFIG_arm_HOST_TRIPLE := arm-linux-gnu
CLANG_CONFIG_arm_HOST_COMBO_EXTRA_ASFLAGS := $(CLANG_CONFIG_arm_LINUX_HOST_EXTRA_ASFLAGS)
CLANG_CONFIG_arm_HOST_COMBO_EXTRA_CFLAGS := $(CLANG_CONFIG_arm_LINUX_HOST_EXTRA_CFLAGS)
CLANG_CONFIG_arm_HOST_COMBO_EXTRA_CPPFLAGS := $(CLANG_CONFIG_arm_LINUX_HOST_EXTRA_CPPFLAGS)
CLANG_CONFIG_arm_HOST_COMBO_EXTRA_LDFLAGS := $(CLANG_CONFIG_arm_LINUX_HOST_EXTRA_LDFLAGS)

CLANG_CONFIG_arm_HOST_EXTRA_ASFLAGS := \
  $(CLANG_CONFIG_EXTRA_ASFLAGS) \
  $(CLANG_CONFIG_HOST_EXTRA_ASFLAGS) \
  $(CLANG_CONFIG_arm_EXTRA_ASFLAGS) \
  $(CLANG_CONFIG_arm_HOST_COMBO_EXTRA_ASFLAGS) \
  -target $(CLANG_CONFIG_arm_HOST_TRIPLE)

CLANG_CONFIG_arm_HOST_EXTRA_CFLAGS := \
  $(CLANG_CONFIG_EXTRA_CFLAGS) \
  $(CLANG_CONFIG_HOST_EXTRA_CFLAGS) \
  $(CLANG_CONFIG_arm_EXTRA_CFLAGS) \
  $(CLANG_CONFIG_arm_HOST_COMBO_EXTRA_CFLAGS) \
  $(CLANG_CONFIG_arm_HOST_EXTRA_ASFLAGS)

CLANG_CONFIG_arm_HOST_EXTRA_CPPFLAGS := \
  $(CLANG_CONFIG_EXTRA_CPPFLAGS) \
  $(CLANG_CONFIG_HOST_EXTRA_CPPFLAGS) \
  $(CLANG_CONFIG_arm_EXTRA_CPPFLAGS) \
  $(CLANG_CONFIG_arm_HOST_COMBO_EXTRA_CPPFLAGS) \
  -target $(CLANG_CONFIG_arm_HOST_TRIPLE)

CLANG_CONFIG_arm_HOST_EXTRA_LDFLAGS := \
  $(CLANG_CONFIG_EXTRA_LDFLAGS) \
  $(CLANG_CONFIG_HOST_EXTRA_LDFLAGS) \
  $(CLANG_CONFIG_arm_EXTRA_LDFLAGS) \
  $(CLANG_CONFIG_arm_HOST_COMBO_EXTRA_LDFLAGS) \
  -target $(CLANG_CONFIG_arm_HOST_TRIPLE)

define convert-to-host-clang-flags
  $(strip \
  $(call subst-clang-incompatible-arm-flags,\
  $(filter-out $(CLANG_CONFIG_arm_UNKNOWN_CFLAGS),\
  $(1))))
endef

CLANG_HOST_GLOBAL_CFLAGS := \
  $(call convert-to-host-clang-flags,$(HOST_GLOBAL_CFLAGS)) \
  $(CLANG_CONFIG_arm_HOST_EXTRA_CFLAGS)

CLANG_HOST_GLOBAL_CPPFLAGS := \
  $(call convert-to-host-clang-flags,$(HOST_GLOBAL_CPPFLAGS)) \
  $(CLANG_CONFIG_arm_HOST_EXTRA_CPPFLAGS)

CLANG_HOST_GLOBAL_LDFLAGS := \
  $(call convert-to-host-clang-flags,$(HOST_GLOBAL_LDFLAGS)) \
  $(CLANG_CONFIG_arm_HOST_EXTRA_LDFLAGS)
